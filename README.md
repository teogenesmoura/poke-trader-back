## Poketrader back

# PokeTrader front

[![codecov](https://codecov.io/gh/teogenesmoura/poke-trader-front/branch/master/graph/badge.svg?token=5IA3FKBE66)](https://codecov.io/gh/teogenesmoura/poke-trader-front)
[![Actions Status](https://github.com/teogenesmoura/poke-trader-front/workflows/Deployment/badge.svg)](https://github.com/teogenesmoura/poke-trader-front/actions)
[![GitHub license](https://img.shields.io/github/license/Naereen/StrapDown.js.svg)](https://github.com/Naereen/StrapDown.js/blob/master/LICENSE)

<center><img src="https://raw.githubusercontent.com/teogenesmoura/poke-trader-front/master/src/assets/logo.svg"></center>

## About the project

<center><img src="https://media.giphy.com/media/TT10M7AZ9kDbiNxZEZ/giphy.gif"></center>

PokeTrader is the [BxBlue](http://bxblue.com.br) challenge for software developer roles. It is a platform which allows users to simulate pokemon trading. It allows users to select a set of up to 6 pokemons and compare them against another set to see if trading them is beneficial. The following features were implemented:

 - Users are able to retrieve pokemons from the PokeAPI and see their image and experience levels before adding them to one of the two lists

 - Users are able to create two lists of pokemons and compare one against the other for fairness. The criteria used was that if the total experience points of one group represent +- 15% of the other the exchange is considered fair.

 - Users are able to save a simulation and its result to a history they can later access

- Users are able to create an account, login and logout through JWT tokens, allowing for a decoupled architecture of the backend and front end of the application

- Several trade-offs were taken into account while building this app. The first of them is that it **is not** responsive. When I prototyped it in Figma I thought it was a great experience in the desktop and I decided not to focus on an mobile version.

- Both back and front-ends are intentionally generalists, so that the application can be used in the future for other types of creatures such as Digimons, for example.


## Live demo
A live demo of this project can be found [here](http://poketraderfront.herokuapp.com/)

## Pre-requisites

In order to run the project locally the following software packages are necessary:
* [NPM](https://www.npmjs.com/) version 6.14.8 or higher
* [React](https://reactjs.org/) version 17.0.1

## How to run the project

1. Clone this repo
```bash
git clone https://github.com/teogenesmoura/poke-trader-back.git
```
2. Enter the project's root directory
```bash
cd poke-trader-back
```

3. Create env
```bash
python3 -m venv env
```
4. Initiate env
```bash
source env/bin/activate
```
5. Install requirements
```bash
pip install -r requirements.txt
```
6. Create the database for the application
```bash
psql
create database poke_trader_back;
```

7. Install dotenv

```bash
pip3 install dotenv
```
8. Create a .env file in the root directory of the project. We'll need three
environment variables:

```
APP_SETTINGS="app.config.DevelopmentConfig"
SECRET_KEY={}
DATABASE_URL="postgres:///poketrader"
```

The SECRET_KEY env variable can be generated by running the following commands
on Pythons' shell:

```
>> import os
>> os.urandom(24)
```

5. Lastly, run

```bash
python3 run.py
```
The app should now be live on http://localhost:8080

## How to run tests

- run the following to run the tests
```bash
python3 manage.py test
```


## How to modify the CI workflow
1. This project automatically generates a build every time a PR is accepted to the master branch. In order to do so, it relies on a Github actions workflow, which can be found inside the ```.github/workflows``` folder. If you're going to modify it, take care to set up the appropriate secrets in your repo's enviroment, otherwise the project will not work. If you're deploying it to a PaaS such as Heroku or Netlytics, remember to add the enviroment variables to their configurations.


#### Routes

```
POST /auth/register
username: str
password: str
email: str

```

#### Login

```
POST /auth/login/
username: str
password: str  
```

#### Token Status

```
Authorization-Headers: Token Bearer
GET /auth/status/
```

#### Logout

```
Authorization-Headers: Token Bearer
POST /auth/logout/
```

### Create an Entry
```
Authorization-Headers: Token Bearer
POST /user/entry
isTradeFair: bool
host: JSON
opponent: JSON
```
### Get entries
```
Authorization-Headers: Token Bearer
GET /user/entries
```
